select p_personid, p_firstname, p_lastname, l_creationdate,
    (case when exists (select 1 from knows where k_person1id = @Person@ and k_person2id = p_personid) then 0 else 1 end) as isnew,
    ps_postid, content, lag
from
(select top 20 p_personid, p_firstname, p_lastname, l_creationdate, --Q7
        ps_postid, ps_content || ps_imagefile as content,
    (l_creationdate - ps_creationdate) / 60000 as lag
from likes, post, person
where
    p_personid = l_personid and
    ps_postid = l_postid and
    ps_creatorid = @Person@
order by l_creationdate desc, 1) tmp
